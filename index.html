<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Tramites Tesoreria - Alcald√≠a El Banco</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="src/component/ccs/index.css">
    <link rel="stylesheet" href="src/page/css/detalleUsuario.css">

</head>
<body>

    <div class="container">
        <div class="header">
            <h1>üìã Sistema de Seguimiento de Resoluciones</h1>
            <p>Actualizaci√≥n Autom√°tica del CSV - Sin Descargas</p>
        </div>

        <div style="padding: 20px;">
            <button id="toggleMainBtn" class="btn btn-primary" style="width: 100%; padding: 15px; font-size: 1.2rem;" onclick="toggleApp()">
                ‚ûï Agregar Titular
            </button>
        </div>

        <div id="mainContent" style="display: none;">
            <div class="content">
                <div id="message" class="message"></div>

                <div class="form-section">
                    <h2>‚ûï Agregar Nuevo Registro</h2>
                    <form id="basicForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Nombre Titular: *</label>
                                <input type="text" id="nombreTitular" required>
                            </div>
                            <div class="form-group">
                                <label>N√∫mero Documento: *</label>
                                <input type="text" id="numeroDocumento" required>
                            </div>
                            <div class="form-group">
                                <label>N√∫mero Inmobiliaria:</label>
                                <input type="text" id="numeroInmobiliaria">
                            </div>
                            <div class="form-group">
                                <label>Direcci√≥n Propiedad:</label>
                                <input type="text" id="direccionPropiedad">
                            </div>
                            <div class="form-group">
                                <label>Total Endeudamiento:</label>
                                <input type="number" id="totalEndeudamiento" step="0.01">
                            </div>
                            <div class="form-group">
                                <label>Oficio Resoluci√≥n Persuasi√≥n:</label>
                                <input type="text" id="oficioResolucionPersuacion">
                            </div>
                            <div class="form-group">
                                <label>Fecha Oficio Res. Persuasi√≥n:</label>
                                <input type="date" id="fechaOficioResolucionPersuacion">
                            </div>
                        </div>

                        <div class="button-group">
                            <button type="submit" class="btn btn-primary">üíæ Guardar Registro</button>
                            <button type="button" class="btn btn-secondary" onclick="clearBasicForm()">üîÑ Limpiar</button>
                        </div>
                        
                        <div style="margin-top: 15px; padding: 12px; background: #e7f3ff; border-radius: 8px; border-left: 4px solid #2196F3;">
                            <p style="margin: 0; font-size: 0.9rem; color: #1976D2;">
                                <strong>‚ö° Sistema Autom√°tico:</strong>
                            </p>
                            <ul style="margin: 8px 0 0 0; padding-left: 20px; font-size: 0.85rem; color: #1976D2;">
                                <li>Primera vez: El navegador te pedir√° acceso a la carpeta del proyecto</li>
                                <li>Selecciona la carpeta ra√≠z que contiene <code>plantillaSeguimiento/</code></li>
                                <li>Todos los cambios se guardan autom√°ticamente en el CSV</li>
                                <li>No hay descargas ni copias - Todo es autom√°tico ‚ú®</li>
                            </ul>
                        </div>
                    </form>
                </div>

                <div class="table-section" style="display: none;">
                    <h2>üìä Registros en Seguimiento</h2>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Estado</th>
                                    <th>Nombre Titular</th>
                                    <th>N¬∞ Documento</th>
                                    <th>N¬∞ Inmobiliaria</th>
                                    <th>Direcci√≥n</th>
                                    <th>Endeudamiento</th>
                                    <th>Oficio Persuasi√≥n</th>
                                    <th>Fecha</th>
                                    <th>Liquidacion Tributario</th>
                                    <th>Pago Coactivo OTMIPUMP</th>
                                    <th>Med. Cautelar</th>
                                    <th>Embargo</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="tableBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para completar informaci√≥n -->
    <div id="completeModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2 style="color: #667eea; margin-bottom: 20px;">‚ûï Completar Informaci√≥n Adicional</h2>
            
            <form id="completeForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label>Resoluci√≥n COC Tributario:</label>
                        <input type="text" id="modal_resolucioncOCTributario">
                    </div>
                    <div class="form-group">
                        <label>Fecha Resoluci√≥n COC Tributario:</label>
                        <input type="date" id="modal_fechaResolucionCOCTributario">
                    </div>
                    <div class="form-group">
                        <label>Resoluci√≥n OTMIPUMP:</label>
                        <input type="text" id="modal_resolucionOTMIPUMP">
                    </div>
                    <div class="form-group">
                        <label>Fecha Resoluci√≥n OTMIPUMP:</label>
                        <input type="date" id="modal_fechaResolucionOTMIPUMP">
                    </div>
                    <div class="form-group">
                        <label>Resoluci√≥n Medida Cautelar:</label>
                        <input type="text" id="modal_resolucionMedidaCautera">
                    </div>
                    <div class="form-group">
                        <label>Fecha Resoluci√≥n Med. Cautelar:</label>
                        <input type="date" id="modal_fechaResolucionMedidaCautera">
                    </div>
                    <div class="form-group">
                        <label>Resoluci√≥n Embargo:</label>
                        <input type="text" id="modal_resolucionEmbargo">
                    </div>
                    <div class="form-group">
                        <label>Fecha Resoluci√≥n Embargo:</label>
                        <input type="date" id="modal_fechaResolucionEmbargo">
                    </div>
                    <div class="form-group" style="grid-column: 1 / -1;">
                        <label>Observaciones:</label>
                        <textarea id="modal_observaciones" rows="4"></textarea>
                    </div>
                </div>

                <div class="button-group">
                    <button type="submit" class="btn btn-primary">üíæ Guardar Cambios</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">‚ùå Cancelar</button>
                </div>

                <div style="margin-top: 15px; padding: 10px; background: #fff3cd; border-radius: 6px; border-left: 4px solid #ffc107;">
                    <p style="margin: 0; font-size: 0.85rem; color: #856404;">
                        <strong>‚ö†Ô∏è Nota:</strong> Los campos con informaci√≥n existente est√°n bloqueados para preservar los datos.
                    </p>
                </div>
            </form>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <h1>ALCALD√çA DE EL BANCO</h1>
            <p>Departamento del Magdalena - PROCESO ADMINISTRATIVO COACTIVO

        <div class="main-menu">
           <div class="menu-option" onclick="openModalPersuasivo('notificacionPersuasivo')">
                <h2>1. Realizar Oficio Persuacivo</h2>
                <p>Primer Paso</p>
            </div>
            <div class="menu-option" onclick="openModalResolucion('notoficacionResolucion')">
                <h2>2. Liquidacion Tributaria Por Concepto de Impuesto Predial (Resolucion)</h2>
                <p>Segundo Paso</p>
            </div>
            <div class="menu-option" onclick="openModal('coactivo')">
                <h2>3. Realizar OTCIP Mandamiento de Pago (OTMIPUMP)+ Citaci√≥n Pos (OTMIPUMP)</h2>
                <p>Tercer Paso</p>
            </div>
            <div class="menu-option" onclick="openModalMedidaCautera('medidaCautelar')">
                <h2>3.1 Medida Cautelar De Embargos</h2>
                <p>Resolucion</p>
            </div>
            <div class="menu-option" onclick="openModalMedidaCautelar('incripcionMedidaCautelar')">
                <h2>3.2 Inscripcion de medida cautelar de embargo sobe bien inmueble</h2>
                <p>Inscripcion</p>
            </div>
            <div class="menu-option" onclick="openModalBancaria('notificacionBancaria')">
                <h2>3.3 Realizar Oficio Bancario</h2>
                <p>Oficios Bacarios Individual</p>
            </div>
        </div>
    </div>

    <!-- Modal Persuasivo -->
    <div id="modalPersuasivo" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Realizar Persuasivo</h2>
                <button class="close-btn" onclick="closeModal('persuasivo')">&times;</button>
            </div>
            <div class="modal-body">
                <p style="text-align: center; color: #666; padding: 40px;">
                    M√≥dulo de procesos persuasivos pr√≥ximamente disponible
                </p>
            </div>
        </div>
    </div>

    <!-- Modal Resolucion -->
    <div id="modalResolucion" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Realizar Resolucion</h2>
                <button class="close-btn" onclick="closeModal('resolucion')">&times;</button>
            </div>
            <div class="modal-body">
                <p style="text-align: center; color: #666; padding: 40px;">
                    M√≥dulo de procesos de resolucion pr√≥ximamente disponible
                </p>
            </div>
        </div>
    </div>

    <!-- Modal Coactivo -->
    <div id="modalCoactivo" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Mandamiento de Pago Coactivo</h2>
                <button class="close-btn" onclick="closeModal('coactivo')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="coactivoForm">
                    <div class="form-group">
                        <label>N√∫mero de Mandamiento (OTMIPUMP2025****)</label>
                        <input type="number" id="numeroMandamiento" placeholder="Ej: 0023" required>
                        <span class="error-message" id="errorMandamiento">Este campo es obligatorio</span>
                    </div>

                    <div class="row">
                        <div class="form-group">
                            <label>N√∫mero de Factura</label>
                            <input type="text" id="numeroFactura" placeholder="N√∫mero de factura" required>
                            <span class="error-message" id="errorFactura">Este campo es obligatorio</span>
                        </div>

                        <div class="form-group">
                            <label>N√∫mero de C√©dula</label>
                            <input type="text" id="numeroCedula" placeholder="Ej: 1.234.567" required>
                            <span class="error-message" id="errorCedula">Este campo es obligatorio</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Nombre del Contribuyente</label>
                        <input type="text" id="nombreContribuyente" placeholder="Nombre completo" required>
                        <span class="error-message" id="errorNombre">Este campo es obligatorio</span>
                    </div>

                    <div class="row">
                        <div class="form-group">
                            <label>A√±os Parafiscal</label>
                            <input type="text" id="anosParafiscal" placeholder="Ej: 2024-2025" required>
                            <span class="error-message" id="errorAnos">Este campo es obligatorio</span>
                        </div>

                        <div class="form-group">
                            <label>N√∫mero Catastral</label>
                            <input type="text" id="numeroCatastro" placeholder="N√∫mero catastral" required>
                            <span class="error-message" id="errorCatastro">Este campo es obligatorio</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Direcci√≥n del Predio</label>
                        <input type="text" id="direccion" placeholder="Ej: Calle 7 #12-85" required>
                        <span class="error-message" id="errorDireccion">Este campo es obligatorio</span>
                    </div>

                    <div class="form-group">
                        <label>Matr√≠cula Inmobiliaria</label>
                        <input type="text" id="numeroInmobiliario" placeholder="Ej: 123-456789" required>
                        <span class="error-message" id="errorInmobiliario">Este campo es obligatorio</span>
                    </div>

                    <div class="form-group">
                        <label>Total de Deuda</label>
                        <textarea id="totalDeuda" placeholder="Ej: DOS MILLONES QUINIENTOS MIL PESOS ($2.500.000)" required></textarea>
                        <span class="error-message" id="errorDeuda">Este campo es obligatorio</span>
                    </div>

                    <div class="form-group">
                        <label>N√∫mero de Radicaci√≥n</label>
                        <input type="text" id="numeroRadicacion" placeholder="N√∫mero de radicaci√≥n" required>
                        <span class="error-message" id="errorRadicacion">Este campo es obligatorio</span>
                    </div>

                    <button type="submit" class="btn">GENERAR PDF</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal Confirmaci√≥n -->
    <!-- Modal Confirmaci√≥n -->
<div id="modalConfirm" class="modal">
    <div class="confirm-modal">
        <div class="confirm-header">
            <h2>Confirmar Generaci√≥n de PDF</h2>
        </div>
        <div class="confirm-body">
            <p style="color: #2e7d32; font-weight: 600; margin-bottom: 15px;">
                ¬øEst√° seguro de generar el PDF con estos datos?
            </p>
            <div class="confirm-data" id="confirmData"></div>
            <div class="confirm-buttons">
                <button class="btn-modify" onclick="modifyData()">Modificar</button>
                <button class="btn-confirm" onclick="confirmGenerate()">S√≠, Generar</button>
            </div>
        </div>
    </div>
</div>

<!-- Overlay de carga -->
<div id="loadingOverlay" class="loading-overlay" style="display: none;">
    <div class="loading-content">
        <div class="spinner"></div>
        <div class="loading-text">Generando PDF, por favor espere...</div>
    </div>
</div>
    <!-- jsPDF library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <!-- TUS ARCHIVOS (en este orden CR√çTICO) -->
    <script src="src/component/javascript/pdf-utils.js"></script>           <!-- 1. Primero las funciones compartidas -->
    <script src="src/component/javascript/InicioOTMIPUMP.js"></script>          <!-- 2.CODIGO DE CREAR MANDAMIENTO DE PAGO -->
    <script src="src/component/javascript/CitacionOTMIPUMP.js"></script>     <!-- 3. CODIGO DE CITACION -->
    <script src="src/component/javascript/notifications.js"></script> 
    <script src="src/page/javacritp/modales.js"></script> 
    <script src="src/page/javacritp/detalleUsuario.js"></script> <!-- MODALES PARA ABRIR -->
    
         
        
    
</body>
</html>